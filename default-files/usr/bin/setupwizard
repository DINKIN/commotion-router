#!/bin/ash

<<COMMENT

User workflow
* flash router
* telnet in
* enter password
* new profile name
* mesh network name
* channel
* mesh encryption?
--> mesh encryption password
* access point name
* channel
* require a password?
--> AP password

COMMENT


echo -e "\n\nWelcome to the configuration wizard.\n"

if [ `grep root /etc/shadow | cut -d ":" -f 2` == "x" ]; then
  echo "Please choose an administrator password: "
  passwd
fi

echo "Please enter new profile name: "

read PROFILE_NAME

commotion new $PROFILE_NAME

echo "Please enter mesh network name: "

read MESH_NAME

commotion set $PROFILE_NAME ssid $MESH_NAME

echo "Please select a valid channel: "

read MESH_CHANNEL

commotion set $PROFILE_NAME channel $MESH_CHANNEL


echo "Would you like to use encryption for the mesh network?"
  read answer                                                
  case $answer in                                            
    [Yy]*  ) echo "Please choose an encryption password: ";  
          read MESH_PASSWORD;                                
          commotion set $PROFILE_NAME key $MESH_PASSWORD;    
          break;;                                            
                                                             
    [Nn]* ) break;;                                          
    * ) echo "Please answer yes[y] or no[n]";;               
  esac 



# commit profile changes
commotion save $PROFILE_NAME



<<COMMENT
function set_admin_pass {

echo "Please enter an administrator password: "

read PASSWORD

echo "Password is: $PASSWORD"
}

function set_node_name 
{

echo "set_node_name"

}

function set_mesh_network 
{

echo "set_mesh_network"

}

function set_mesh_channel 
{

echo "set_mesh_channel"

}

function set_mesh_encryption 
{

echo "set_mesh_encryption"

}

function set_ap_name {

echo "set_ap_name"

}

function set_ap_channel {

echo "set_ap_channel"

}

function set_ap_pass {

echo "set_ap_pass"

}
COMMENT